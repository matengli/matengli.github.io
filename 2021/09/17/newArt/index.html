<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>newArt - Hexo</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">




<meta name="description" content="">





    <meta name="description" content="12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697989910010110210">
<meta property="og:type" content="article">
<meta property="og:title" content="newArt">
<meta property="og:url" content="http://example.com/2021/09/17/newArt/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697989910010110210">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-09-18T05:58:44.000Z">
<meta property="article:modified_time" content="2021-09-18T06:00:58.673Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">





<link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">


<link rel="stylesheet" href="/css/style.css">


<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
    
    
    
    
    
    
    
    
    

    


<meta name="generator" content="Hexo 5.4.0"></head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                <img src="/images/logo.png" alt="" height="28">
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/archives">Archives</a>
            
            <a class="navbar-item "
               href="/categories/LifeStyle">Lifestyle</a>
            
            <a class="navbar-item "
               href="/categories/Music">Music</a>
            
            <a class="navbar-item "
               href="/categories/Technology">Technology</a>
            
            <a class="navbar-item "
               href="/about">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="Search" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            
            <a class="navbar-item" title="GitHub" target="_blank" rel="noopener" href="https://github.com/ppoffice/hexo-theme-minos">
                
                <i class="fab fa-github"></i>
                
            </a>
               
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            newArt
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2021-09-18T05:58:44.000Z" itemprop="datePublished">Sep 17 2021</time>
            
        </span>
        
        
        <span class="column is-narrow">
            
            
            17 minutes read (About 2492 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><figure class="highlight lua hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">--[[</span></span><br><span class="line"><span class="hljs-comment"></span></span><br><span class="line"><span class="hljs-comment">Copyright (c) 2011-2014 chukong-inc.com</span></span><br><span class="line"><span class="hljs-comment"></span></span><br><span class="line"><span class="hljs-comment">Permission is hereby granted, free of charge, to any person obtaining a copy</span></span><br><span class="line"><span class="hljs-comment">of this software and associated documentation files (the "Software"), to deal</span></span><br><span class="line"><span class="hljs-comment">in the Software without restriction, including without limitation the rights</span></span><br><span class="line"><span class="hljs-comment">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></span><br><span class="line"><span class="hljs-comment">copies of the Software, and to permit persons to whom the Software is</span></span><br><span class="line"><span class="hljs-comment">furnished to do so, subject to the following conditions:</span></span><br><span class="line"><span class="hljs-comment"></span></span><br><span class="line"><span class="hljs-comment">The above copyright notice and this permission notice shall be included in</span></span><br><span class="line"><span class="hljs-comment">all copies or substantial portions of the Software.</span></span><br><span class="line"><span class="hljs-comment"></span></span><br><span class="line"><span class="hljs-comment">THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></span><br><span class="line"><span class="hljs-comment">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></span><br><span class="line"><span class="hljs-comment">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></span><br><span class="line"><span class="hljs-comment">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></span><br><span class="line"><span class="hljs-comment">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></span><br><span class="line"><span class="hljs-comment">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span></span><br><span class="line"><span class="hljs-comment">THE SOFTWARE.</span></span><br><span class="line"><span class="hljs-comment"></span></span><br><span class="line"><span class="hljs-comment">]]</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">local</span> display = {}</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">local</span> director = cc.Director:getInstance()</span><br><span class="line"><span class="hljs-keyword">local</span> view = director:getOpenGLView()</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> view <span class="hljs-keyword">then</span></span><br><span class="line">    <span class="hljs-keyword">local</span> width = <span class="hljs-number">960</span></span><br><span class="line">    <span class="hljs-keyword">local</span> height = <span class="hljs-number">640</span></span><br><span class="line">    <span class="hljs-keyword">if</span> CC_DESIGN_RESOLUTION <span class="hljs-keyword">then</span></span><br><span class="line">        <span class="hljs-keyword">if</span> CC_DESIGN_RESOLUTION.width <span class="hljs-keyword">then</span></span><br><span class="line">            width = CC_DESIGN_RESOLUTION.width</span><br><span class="line">        <span class="hljs-keyword">end</span></span><br><span class="line">        <span class="hljs-keyword">if</span> CC_DESIGN_RESOLUTION.height <span class="hljs-keyword">then</span></span><br><span class="line">            height = CC_DESIGN_RESOLUTION.height</span><br><span class="line">        <span class="hljs-keyword">end</span></span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line">    view = cc.GLViewImpl:createWithRect(<span class="hljs-string">"EleStorm"</span>, cc.rect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height))</span><br><span class="line">    director:setOpenGLView(view)</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">local</span> framesize = view:getFrameSize()</span><br><span class="line"><span class="hljs-keyword">local</span> textureCache = director:getTextureCache()</span><br><span class="line"><span class="hljs-keyword">local</span> spriteFrameCache = cc.SpriteFrameCache:getInstance()</span><br><span class="line"><span class="hljs-keyword">local</span> animationCache = cc.AnimationCache:getInstance()</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">-- auto scale</span></span><br><span class="line"><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkResolution</span><span class="hljs-params">(r)</span></span></span><br><span class="line">    r.width = checknumber(r.width)</span><br><span class="line">    r.height = checknumber(r.height)</span><br><span class="line">    r.autoscale = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">upper</span>(r.autoscale)</span><br><span class="line">    <span class="hljs-built_in">assert</span>(r.width &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> r.height &gt; <span class="hljs-number">0</span>,</span><br><span class="line">        <span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"display - invalid design resolution size %d, %d"</span>, r.width, r.height))</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setDesignResolution</span><span class="hljs-params">(r, framesize)</span></span></span><br><span class="line">    <span class="hljs-keyword">if</span> r.autoscale == <span class="hljs-string">"FILL_ALL"</span> <span class="hljs-keyword">then</span></span><br><span class="line">        view:setDesignResolutionSize(framesize.width, framesize.height, cc.ResolutionPolicy.FILL_ALL)</span><br><span class="line">    <span class="hljs-keyword">else</span></span><br><span class="line">        <span class="hljs-keyword">local</span> scaleX, scaleY = framesize.width / r.width, framesize.height / r.height</span><br><span class="line">        <span class="hljs-keyword">local</span> width, height = framesize.width, framesize.height</span><br><span class="line">        <span class="hljs-keyword">if</span> r.autoscale == <span class="hljs-string">"FIXED_WIDTH"</span> <span class="hljs-keyword">then</span></span><br><span class="line">            width = framesize.width / scaleX</span><br><span class="line">            height = framesize.height / scaleX</span><br><span class="line">            view:setDesignResolutionSize(width, height, cc.ResolutionPolicy.NO_BORDER)</span><br><span class="line">        <span class="hljs-keyword">elseif</span> r.autoscale == <span class="hljs-string">"FIXED_HEIGHT"</span> <span class="hljs-keyword">then</span></span><br><span class="line">            width = framesize.width / scaleY</span><br><span class="line">            height = framesize.height / scaleY</span><br><span class="line">            view:setDesignResolutionSize(width, height, cc.ResolutionPolicy.NO_BORDER)</span><br><span class="line">        <span class="hljs-keyword">elseif</span> r.autoscale == <span class="hljs-string">"EXACT_FIT"</span> <span class="hljs-keyword">then</span></span><br><span class="line">            view:setDesignResolutionSize(r.width, r.height, cc.ResolutionPolicy.EXACT_FIT)</span><br><span class="line">        <span class="hljs-keyword">elseif</span> r.autoscale == <span class="hljs-string">"NO_BORDER"</span> <span class="hljs-keyword">then</span></span><br><span class="line">            view:setDesignResolutionSize(r.width, r.height, cc.ResolutionPolicy.NO_BORDER)</span><br><span class="line">        <span class="hljs-keyword">elseif</span> r.autoscale == <span class="hljs-string">"SHOW_ALL"</span> <span class="hljs-keyword">then</span></span><br><span class="line">            view:setDesignResolutionSize(r.width, r.height, cc.ResolutionPolicy.SHOW_ALL)</span><br><span class="line">        <span class="hljs-keyword">else</span></span><br><span class="line">            printError(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"display - invalid r.autoscale \"%s\""</span>, r.autoscale))</span><br><span class="line">        <span class="hljs-keyword">end</span></span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setConstants</span><span class="hljs-params">()</span></span></span><br><span class="line">    <span class="hljs-keyword">local</span> sizeInPixels = view:getFrameSize()</span><br><span class="line">    display.sizeInPixels = {width = sizeInPixels.width, height = sizeInPixels.height}</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">local</span> viewsize = director:getWinSize()</span><br><span class="line">    display.contentScaleFactor = director:getContentScaleFactor()</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">local</span> maxOffsetX = <span class="hljs-number">60</span></span><br><span class="line">    <span class="hljs-keyword">local</span> maxOffsetY = <span class="hljs-number">30</span></span><br><span class="line">    <span class="hljs-keyword">local</span> safesize = director:getSafeAreaRect()</span><br><span class="line"></span><br><span class="line">    safesize.x = <span class="hljs-built_in">math</span>.round(safesize.x)</span><br><span class="line">    safesize.y = <span class="hljs-built_in">math</span>.round(safesize.y)</span><br><span class="line">    safesize.width = <span class="hljs-built_in">math</span>.round(safesize.width)</span><br><span class="line">    safesize.height = <span class="hljs-built_in">math</span>.round(safesize.height)</span><br><span class="line">    safesize.x = safesize.x &gt; maxOffsetX <span class="hljs-keyword">and</span> maxOffsetX <span class="hljs-keyword">or</span> safesize.x</span><br><span class="line">    safesize.y = safesize.y &gt; maxOffsetY <span class="hljs-keyword">and</span> maxOffsetY <span class="hljs-keyword">or</span> safesize.y</span><br><span class="line">   </span><br><span class="line">    <span class="hljs-keyword">local</span> width = viewsize.width - maxOffsetX*<span class="hljs-number">2</span>;</span><br><span class="line">    safesize.width = safesize.width &gt;= width <span class="hljs-keyword">and</span> safesize.width <span class="hljs-keyword">or</span> width;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">local</span> height = viewsize.height - maxOffsetY;</span><br><span class="line">    safesize.height = safesize.height &gt;= height <span class="hljs-keyword">and</span> safesize.height <span class="hljs-keyword">or</span> height;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">local</span> space = <span class="hljs-built_in">math</span>.<span class="hljs-built_in">max</span>(safesize.x, viewsize.width-safesize.width-safesize.x)</span><br><span class="line">    safesize.x = space</span><br><span class="line">    safesize.width = viewsize.width - space * <span class="hljs-number">2</span></span><br><span class="line"></span><br><span class="line">    display.width              = viewsize.width</span><br><span class="line">    display.height             = viewsize.height</span><br><span class="line">    display.size               = {width = safesize.width, height = safesize.height}</span><br><span class="line">    display.sw                 = display.size.width</span><br><span class="line">    display.sh                 = display.size.height</span><br><span class="line">    display.cx                 = display.width / <span class="hljs-number">2</span>;</span><br><span class="line">    display.cy                 = display.height / <span class="hljs-number">2</span>;</span><br><span class="line">    display.left               = safesize.x</span><br><span class="line">    display.right              = safesize.x + display.width</span><br><span class="line">    display.top                = safesize.y + display.height</span><br><span class="line">    display.bottom             = safesize.y</span><br><span class="line">    display.cl                 = display.left - display.cx</span><br><span class="line">    display.cr                 = display.right - display.cx</span><br><span class="line">    display.ct                 = display.top - display.cy</span><br><span class="line">    display.cb                 = display.bottom - display.cy</span><br><span class="line">    display.center             = cc.p(display.cx, display.cy)</span><br><span class="line">    display.lt                 = cc.p(display.left, display.top)</span><br><span class="line">    display.lb                 = cc.p(display.left, display.bottom)</span><br><span class="line">    display.lc                 = cc.p(display.left, display.cy)</span><br><span class="line">    display.rt                 = cc.p(display.right, display.top)</span><br><span class="line">    display.rb                 = cc.p(display.right, display.bottom)</span><br><span class="line">    display.rc                 = cc.p(display.right, display.cy)</span><br><span class="line">    display.tc                 = cc.p(display.cx, display.top)</span><br><span class="line">    display.tb                 = cc.p(display.cx, display.bottom)</span><br><span class="line"></span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.sizeInPixels         = {width = %0.2f, height = %0.2f}"</span>, display.sizeInPixels.width, display.sizeInPixels.height))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.size                 = {width = %0.2f, height = %0.2f}"</span>, display.sw, display.sh))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.safesize             = {width = %0.2f, height = %0.2f}"</span>, display.size.width, display.size.height))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.contentScaleFactor   = %0.2f"</span>, display.contentScaleFactor))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.safewidth            = %0.2f"</span>, display.width))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.safeheight           = %0.2f"</span>, display.height))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.cx                   = %0.2f"</span>, display.cx))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.cy                   = %0.2f"</span>, display.cy))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.left                 = %0.2f"</span>, display.left))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.right                = %0.2f"</span>, display.right))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.top                  = %0.2f"</span>, display.top))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.bottom               = %0.2f"</span>, display.bottom))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.c_left               = %0.2f"</span>, display.cl))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.c_right              = %0.2f"</span>, display.cr))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.c_top                = %0.2f"</span>, display.ct))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.c_bottom             = %0.2f"</span>, display.cb))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.center               = {x = %0.2f, y = %0.2f}"</span>, display.center.x, display.center.y))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.left_top             = {x = %0.2f, y = %0.2f}"</span>, display.lt.x, display.lt.y))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.left_bottom          = {x = %0.2f, y = %0.2f}"</span>, display.lb.x, display.lb.y))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.left_center          = {x = %0.2f, y = %0.2f}"</span>, display.lc.x, display.lc.y))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.right_top            = {x = %0.2f, y = %0.2f}"</span>, display.rt.x, display.rt.y))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.right_bottom         = {x = %0.2f, y = %0.2f}"</span>, display.rb.x, display.rb.y))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.right_center         = {x = %0.2f, y = %0.2f}"</span>, display.rc.x, display.rc.y))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.top_center           = {x = %0.2f, y = %0.2f}"</span>, display.tc.x, display.tc.y))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# display.top_bottom           = {x = %0.2f, y = %0.2f}"</span>, display.tb.x, display.tb.y))</span><br><span class="line">    printInfo(<span class="hljs-string">"#"</span>)</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.setAutoScale</span><span class="hljs-params">(configs)</span></span></span><br><span class="line">    <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(configs) ~= <span class="hljs-string">"table"</span> <span class="hljs-keyword">then</span> <span class="hljs-keyword">return</span> <span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line">    checkResolution(configs)</span><br><span class="line">    <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(configs.callback) == <span class="hljs-string">"function"</span> <span class="hljs-keyword">then</span></span><br><span class="line">        <span class="hljs-keyword">local</span> c = configs.callback(framesize)</span><br><span class="line">        <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(c <span class="hljs-keyword">or</span> {}) <span class="hljs-keyword">do</span></span><br><span class="line">            configs[k] = v</span><br><span class="line">        <span class="hljs-keyword">end</span></span><br><span class="line">        checkResolution(configs)</span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line">    setDesignResolution(configs, framesize)</span><br><span class="line"></span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# design resolution size       = {width = %0.2f, height = %0.2f}"</span>, configs.width, configs.height))</span><br><span class="line">    printInfo(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"# design resolution autoscale  = %s"</span>, configs.autoscale))</span><br><span class="line">    setConstants()</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(CC_DESIGN_RESOLUTION) == <span class="hljs-string">"table"</span> <span class="hljs-keyword">then</span></span><br><span class="line">    display.setAutoScale(CC_DESIGN_RESOLUTION)</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line">display.COLOR_WHITE = cc.c3b(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>)</span><br><span class="line">display.COLOR_BLACK = cc.c3b(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)</span><br><span class="line">display.COLOR_RED   = cc.c3b(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)</span><br><span class="line">display.COLOR_GREEN = cc.c3b(<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>)</span><br><span class="line">display.COLOR_BLUE  = cc.c3b(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>)</span><br><span class="line"></span><br><span class="line">display.AUTO_SIZE      = <span class="hljs-number">0</span></span><br><span class="line">display.FIXED_SIZE     = <span class="hljs-number">1</span></span><br><span class="line">display.LEFT_TO_RIGHT  = <span class="hljs-number">0</span></span><br><span class="line">display.RIGHT_TO_LEFT  = <span class="hljs-number">1</span></span><br><span class="line">display.TOP_TO_BOTTOM  = <span class="hljs-number">2</span></span><br><span class="line">display.BOTTOM_TO_TOP  = <span class="hljs-number">3</span></span><br><span class="line"></span><br><span class="line">display.CENTER        = cc.p(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>)</span><br><span class="line">display.LEFT_TOP      = cc.p(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)</span><br><span class="line">display.LEFT_BOTTOM   = cc.p(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)</span><br><span class="line">display.LEFT_CENTER   = cc.p(<span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>)</span><br><span class="line">display.RIGHT_TOP     = cc.p(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)</span><br><span class="line">display.RIGHT_BOTTOM  = cc.p(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)</span><br><span class="line">display.RIGHT_CENTER  = cc.p(<span class="hljs-number">1</span>, <span class="hljs-number">0.5</span>)</span><br><span class="line">display.CENTER_TOP    = cc.p(<span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>)</span><br><span class="line">display.CENTER_BOTTOM = cc.p(<span class="hljs-number">0.5</span>, <span class="hljs-number">0</span>)</span><br><span class="line"></span><br><span class="line">display.SCENE_TRANSITIONS = {</span><br><span class="line">    CROSSFADE       = {cc.TransitionCrossFade},</span><br><span class="line">    FADE            = {cc.TransitionFade, cc.c3b(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)},</span><br><span class="line">    FADEBL          = {cc.TransitionFadeBL},</span><br><span class="line">    FADEDOWN        = {cc.TransitionFadeDown},</span><br><span class="line">    FADETR          = {cc.TransitionFadeTR},</span><br><span class="line">    FADEUP          = {cc.TransitionFadeUp},</span><br><span class="line">    FLIPANGULAR     = {cc.TransitionFlipAngular, cc.TRANSITION_ORIENTATION_LEFT_OVER},</span><br><span class="line">    FLIPX           = {cc.TransitionFlipX, cc.TRANSITION_ORIENTATION_LEFT_OVER},</span><br><span class="line">    FLIPY           = {cc.TransitionFlipY, cc.TRANSITION_ORIENTATION_UP_OVER},</span><br><span class="line">    JUMPZOOM        = {cc.TransitionJumpZoom},</span><br><span class="line">    MOVEINB         = {cc.TransitionMoveInB},</span><br><span class="line">    MOVEINL         = {cc.TransitionMoveInL},</span><br><span class="line">    MOVEINR         = {cc.TransitionMoveInR},</span><br><span class="line">    MOVEINT         = {cc.TransitionMoveInT},</span><br><span class="line">    PAGETURN        = {cc.TransitionPageTurn, <span class="hljs-literal">false</span>},</span><br><span class="line">    ROTOZOOM        = {cc.TransitionRotoZoom},</span><br><span class="line">    SHRINKGROW      = {cc.TransitionShrinkGrow},</span><br><span class="line">    SLIDEINB        = {cc.TransitionSlideInB},</span><br><span class="line">    SLIDEINL        = {cc.TransitionSlideInL},</span><br><span class="line">    SLIDEINR        = {cc.TransitionSlideInR},</span><br><span class="line">    SLIDEINT        = {cc.TransitionSlideInT},</span><br><span class="line">    SPLITCOLS       = {cc.TransitionSplitCols},</span><br><span class="line">    SPLITROWS       = {cc.TransitionSplitRows},</span><br><span class="line">    TURNOFFTILES    = {cc.TransitionTurnOffTiles},</span><br><span class="line">    ZOOMFLIPANGULAR = {cc.TransitionZoomFlipAngular},</span><br><span class="line">    ZOOMFLIPX       = {cc.TransitionZoomFlipX, cc.TRANSITION_ORIENTATION_LEFT_OVER},</span><br><span class="line">    ZOOMFLIPY       = {cc.TransitionZoomFlipY, cc.TRANSITION_ORIENTATION_UP_OVER},</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">-- display.TEXTURES_PIXEL_FORMAT = {}</span></span><br><span class="line"></span><br><span class="line">display.DEFAULT_TTF_FONT        = <span class="hljs-string">"Arial"</span></span><br><span class="line">display.DEFAULT_TTF_FONT_SIZE   = <span class="hljs-number">32</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">local</span> PARAMS_EMPTY = {}</span><br><span class="line"><span class="hljs-keyword">local</span> RECT_ZERO = cc.rect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">local</span> sceneIndex = <span class="hljs-number">0</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.newScene</span><span class="hljs-params">(name, params)</span></span></span><br><span class="line">    params = params <span class="hljs-keyword">or</span> PARAMS_EMPTY</span><br><span class="line">    sceneIndex = sceneIndex + <span class="hljs-number">1</span></span><br><span class="line">    <span class="hljs-keyword">local</span> scene</span><br><span class="line">    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> params.physics <span class="hljs-keyword">then</span></span><br><span class="line">        scene = cc.Scene:<span class="hljs-built_in">create</span>()</span><br><span class="line">    <span class="hljs-keyword">else</span></span><br><span class="line">        scene = cc.Scene:createWithPhysics()</span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line">    scene.name_ = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"%s:%d"</span>, name <span class="hljs-keyword">or</span> <span class="hljs-string">"&lt;unknown-scene&gt;"</span>, sceneIndex)</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">if</span> params.transition <span class="hljs-keyword">then</span></span><br><span class="line">        scene = display.wrapSceneWithTransition(scene, params.transition, params.<span class="hljs-built_in">time</span>, params.more)</span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">return</span> scene</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.wrapScene</span><span class="hljs-params">(scene, transition, time, more)</span></span></span><br><span class="line">    <span class="hljs-keyword">local</span> key = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">upper</span>(<span class="hljs-built_in">tostring</span>(transition))</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">if</span> key == <span class="hljs-string">"RANDOM"</span> <span class="hljs-keyword">then</span></span><br><span class="line">        <span class="hljs-keyword">local</span> keys = <span class="hljs-built_in">table</span>.keys(display.SCENE_TRANSITIONS)</span><br><span class="line">        key = keys[<span class="hljs-built_in">math</span>.<span class="hljs-built_in">random</span>(<span class="hljs-number">1</span>, #keys)]</span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">if</span> display.SCENE_TRANSITIONS[key] <span class="hljs-keyword">then</span></span><br><span class="line">        <span class="hljs-keyword">local</span> t = display.SCENE_TRANSITIONS[key]</span><br><span class="line">        <span class="hljs-keyword">local</span> cls = t[<span class="hljs-number">1</span>]</span><br><span class="line">        <span class="hljs-built_in">time</span> = <span class="hljs-built_in">time</span> <span class="hljs-keyword">or</span> <span class="hljs-number">0.2</span></span><br><span class="line">        more = more <span class="hljs-keyword">or</span> t[<span class="hljs-number">2</span>]</span><br><span class="line">        <span class="hljs-keyword">if</span> more ~= <span class="hljs-literal">nil</span> <span class="hljs-keyword">then</span></span><br><span class="line">            scene = cls:<span class="hljs-built_in">create</span>(<span class="hljs-built_in">time</span>, scene, more)</span><br><span class="line">        <span class="hljs-keyword">else</span></span><br><span class="line">            scene = cls:<span class="hljs-built_in">create</span>(<span class="hljs-built_in">time</span>, scene)</span><br><span class="line">        <span class="hljs-keyword">end</span></span><br><span class="line">    <span class="hljs-keyword">else</span></span><br><span class="line">        <span class="hljs-built_in">error</span>(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"display.wrapScene() - invalid transition %s"</span>, <span class="hljs-built_in">tostring</span>(transition)))</span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line">    <span class="hljs-keyword">return</span> scene</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.runScene</span><span class="hljs-params">(newScene, transition, time, more)</span></span></span><br><span class="line">    <span class="hljs-keyword">if</span> director:getRunningScene() <span class="hljs-keyword">then</span></span><br><span class="line">        <span class="hljs-keyword">if</span> transition <span class="hljs-keyword">then</span></span><br><span class="line">            newScene = display.wrapScene(newScene, transition, <span class="hljs-built_in">time</span>, more)</span><br><span class="line">        <span class="hljs-keyword">end</span></span><br><span class="line">        director:replaceScene(newScene)</span><br><span class="line">    <span class="hljs-keyword">else</span></span><br><span class="line">        director:runWithScene(newScene)</span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.getRunningScene</span><span class="hljs-params">()</span></span></span><br><span class="line">    <span class="hljs-keyword">return</span> director:getRunningScene()</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.newNode</span><span class="hljs-params">()</span></span></span><br><span class="line">    <span class="hljs-keyword">return</span> cc.Node:<span class="hljs-built_in">create</span>()</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.newLayer</span><span class="hljs-params">(...)</span></span></span><br><span class="line">    <span class="hljs-keyword">local</span> params = {...}</span><br><span class="line">    <span class="hljs-keyword">local</span> c = #params</span><br><span class="line">    <span class="hljs-keyword">local</span> layer</span><br><span class="line">    <span class="hljs-keyword">if</span> c == <span class="hljs-number">0</span> <span class="hljs-keyword">then</span></span><br><span class="line">        <span class="hljs-comment">-- /** creates a fullscreen black layer */</span></span><br><span class="line">        <span class="hljs-comment">-- static Layer *create();</span></span><br><span class="line">        layer = cc.Layer:<span class="hljs-built_in">create</span>()</span><br><span class="line">    <span class="hljs-keyword">elseif</span> c == <span class="hljs-number">1</span> <span class="hljs-keyword">then</span></span><br><span class="line">        <span class="hljs-comment">-- /** creates a Layer with color. Width and height are the window size. */</span></span><br><span class="line">        <span class="hljs-comment">-- static LayerColor * create(const Color4B&amp; color);</span></span><br><span class="line">        layer = cc.LayerColor:<span class="hljs-built_in">create</span>(cc.convertColor(params[<span class="hljs-number">1</span>], <span class="hljs-string">"4b"</span>))</span><br><span class="line">    <span class="hljs-keyword">elseif</span> c == <span class="hljs-number">2</span> <span class="hljs-keyword">then</span></span><br><span class="line">        <span class="hljs-comment">-- /** creates a Layer with color, width and height in Points */</span></span><br><span class="line">        <span class="hljs-comment">-- static LayerColor * create(const Color4B&amp; color, const Size&amp; size);</span></span><br><span class="line">        <span class="hljs-comment">--</span></span><br><span class="line">        <span class="hljs-comment">-- /** Creates a full-screen Layer with a gradient between start and end. */</span></span><br><span class="line">        <span class="hljs-comment">-- static LayerGradient* create(const Color4B&amp; start, const Color4B&amp; end);</span></span><br><span class="line">        <span class="hljs-keyword">local</span> color1 = cc.convertColor(params[<span class="hljs-number">1</span>], <span class="hljs-string">"4b"</span>)</span><br><span class="line">        <span class="hljs-keyword">local</span> p2 = params[<span class="hljs-number">2</span>]</span><br><span class="line">        <span class="hljs-built_in">assert</span>(<span class="hljs-built_in">type</span>(p2) == <span class="hljs-string">"table"</span> <span class="hljs-keyword">and</span> (p2.width <span class="hljs-keyword">or</span> p2.r), <span class="hljs-string">"display.newLayer() - invalid paramerter 2"</span>)</span><br><span class="line">        <span class="hljs-keyword">if</span> p2.r <span class="hljs-keyword">then</span></span><br><span class="line">            layer = cc.LayerGradient:<span class="hljs-built_in">create</span>(color1, cc.convertColor(p2, <span class="hljs-string">"4b"</span>))</span><br><span class="line">        <span class="hljs-keyword">else</span></span><br><span class="line">            layer = cc.LayerColor:<span class="hljs-built_in">create</span>(color1, p2.width, p2.height)</span><br><span class="line">        <span class="hljs-keyword">end</span></span><br><span class="line">    <span class="hljs-keyword">elseif</span> c == <span class="hljs-number">3</span> <span class="hljs-keyword">then</span></span><br><span class="line">        <span class="hljs-comment">-- /** creates a Layer with color, width and height in Points */</span></span><br><span class="line">        <span class="hljs-comment">-- static LayerColor * create(const Color4B&amp; color, GLfloat width, GLfloat height);</span></span><br><span class="line">        <span class="hljs-comment">--</span></span><br><span class="line">        <span class="hljs-comment">-- /** Creates a full-screen Layer with a gradient between start and end in the direction of v. */</span></span><br><span class="line">        <span class="hljs-comment">-- static LayerGradient* create(const Color4B&amp; start, const Color4B&amp; end, const Vec2&amp; v);</span></span><br><span class="line">        <span class="hljs-keyword">local</span> color1 = cc.convertColor(params[<span class="hljs-number">1</span>], <span class="hljs-string">"4b"</span>)</span><br><span class="line">        <span class="hljs-keyword">local</span> p2 = params[<span class="hljs-number">2</span>]</span><br><span class="line">        <span class="hljs-keyword">local</span> p2type = <span class="hljs-built_in">type</span>(p2)</span><br><span class="line">        <span class="hljs-keyword">if</span> p2type == <span class="hljs-string">"table"</span> <span class="hljs-keyword">then</span></span><br><span class="line">            layer = cc.LayerGradient:<span class="hljs-built_in">create</span>(color1, cc.convertColor(p2, <span class="hljs-string">"4b"</span>), params[<span class="hljs-number">3</span>])</span><br><span class="line">        <span class="hljs-keyword">else</span></span><br><span class="line">            layer = cc.LayerColor:<span class="hljs-built_in">create</span>(color1, p2, params[<span class="hljs-number">3</span>])</span><br><span class="line">        <span class="hljs-keyword">end</span></span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line">    <span class="hljs-keyword">return</span> layer</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.newSprite</span><span class="hljs-params">(source, x, y, params)</span></span></span><br><span class="line">    <span class="hljs-keyword">local</span> spriteClass = cc.Sprite</span><br><span class="line">    <span class="hljs-keyword">local</span> scale9 = <span class="hljs-literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(x) == <span class="hljs-string">"table"</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> x.x <span class="hljs-keyword">then</span></span><br><span class="line">        <span class="hljs-comment">-- x is params</span></span><br><span class="line">        params = x</span><br><span class="line">        x = <span class="hljs-literal">nil</span></span><br><span class="line">        y = <span class="hljs-literal">nil</span></span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">local</span> params = params <span class="hljs-keyword">or</span> PARAMS_EMPTY</span><br><span class="line">    <span class="hljs-keyword">if</span> params.scale9 <span class="hljs-keyword">or</span> params.capInsets <span class="hljs-keyword">then</span></span><br><span class="line">        spriteClass = ccui.Scale9Sprite</span><br><span class="line">        scale9 = <span class="hljs-literal">true</span></span><br><span class="line">        params.capInsets = params.capInsets <span class="hljs-keyword">or</span> RECT_ZERO</span><br><span class="line">        params.rect = params.rect <span class="hljs-keyword">or</span> RECT_ZERO</span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">local</span> sprite</span><br><span class="line">    <span class="hljs-keyword">while</span> <span class="hljs-literal">true</span> <span class="hljs-keyword">do</span></span><br><span class="line">        <span class="hljs-comment">-- create sprite</span></span><br><span class="line">        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> source <span class="hljs-keyword">then</span></span><br><span class="line">            sprite = spriteClass:<span class="hljs-built_in">create</span>()</span><br><span class="line">            <span class="hljs-keyword">break</span></span><br><span class="line">        <span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">local</span> sourceType = <span class="hljs-built_in">type</span>(source)</span><br><span class="line">        <span class="hljs-keyword">if</span> sourceType == <span class="hljs-string">"string"</span> <span class="hljs-keyword">then</span></span><br><span class="line">            <span class="hljs-keyword">if</span> <span class="hljs-built_in">string</span>.<span class="hljs-built_in">byte</span>(source) == <span class="hljs-number">35</span> <span class="hljs-keyword">then</span> <span class="hljs-comment">-- first char is #</span></span><br><span class="line">                <span class="hljs-comment">-- create sprite from spriteFrame</span></span><br><span class="line">                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> scale9 <span class="hljs-keyword">then</span></span><br><span class="line">                    sprite = spriteClass:createWithSpriteFrameName(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">sub</span>(source, <span class="hljs-number">2</span>))</span><br><span class="line">                <span class="hljs-keyword">else</span></span><br><span class="line">                    sprite = spriteClass:createWithSpriteFrameName(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">sub</span>(source, <span class="hljs-number">2</span>), params.capInsets)</span><br><span class="line">                <span class="hljs-keyword">end</span></span><br><span class="line">                <span class="hljs-keyword">break</span></span><br><span class="line">            <span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line">            <span class="hljs-comment">-- create sprite from image file</span></span><br><span class="line">            <span class="hljs-comment">-- if display.TEXTURES_PIXEL_FORMAT[source] then</span></span><br><span class="line">            <span class="hljs-comment">--     cc.Texture2D:setDefaultAlphaPixelFormat(display.TEXTURES_PIXEL_FORMAT[source])</span></span><br><span class="line">            <span class="hljs-comment">-- end</span></span><br><span class="line">            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> scale9 <span class="hljs-keyword">then</span></span><br><span class="line">                sprite = spriteClass:<span class="hljs-built_in">create</span>(source)</span><br><span class="line">            <span class="hljs-keyword">else</span></span><br><span class="line">                sprite = spriteClass:<span class="hljs-built_in">create</span>(source, params.rect, params.capInsets)</span><br><span class="line">            <span class="hljs-keyword">end</span></span><br><span class="line">            <span class="hljs-comment">-- if display.TEXTURES_PIXEL_FORMAT[source] then</span></span><br><span class="line">            <span class="hljs-comment">--     cc.Texture2D:setDefaultAlphaPixelFormat(cc.TEXTURE2_D_PIXEL_FORMAT_BGR_A8888)</span></span><br><span class="line">            <span class="hljs-comment">-- end</span></span><br><span class="line">            <span class="hljs-keyword">break</span></span><br><span class="line">        <span class="hljs-keyword">elseif</span> sourceType ~= <span class="hljs-string">"userdata"</span> <span class="hljs-keyword">then</span></span><br><span class="line">            <span class="hljs-built_in">error</span>(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"display.newSprite() - invalid source type \"%s\""</span>, sourceType), <span class="hljs-number">0</span>)</span><br><span class="line">        <span class="hljs-keyword">else</span></span><br><span class="line">            sourceType = tolua.<span class="hljs-built_in">type</span>(source)</span><br><span class="line">            <span class="hljs-keyword">if</span> sourceType == <span class="hljs-string">"cc.SpriteFrame"</span> <span class="hljs-keyword">then</span></span><br><span class="line">                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> scale9 <span class="hljs-keyword">then</span></span><br><span class="line">                    sprite = spriteClass:createWithSpriteFrame(source)</span><br><span class="line">                <span class="hljs-keyword">else</span></span><br><span class="line">                    sprite = spriteClass:createWithSpriteFrame(source, params.capInsets)</span><br><span class="line">                <span class="hljs-keyword">end</span></span><br><span class="line">            <span class="hljs-keyword">elseif</span> sourceType == <span class="hljs-string">"cc.Texture2D"</span> <span class="hljs-keyword">then</span></span><br><span class="line">                sprite = spriteClass:createWithTexture(source)</span><br><span class="line">            <span class="hljs-keyword">else</span></span><br><span class="line">                <span class="hljs-built_in">error</span>(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"display.newSprite() - invalid source type \"%s\""</span>, sourceType), <span class="hljs-number">0</span>)</span><br><span class="line">            <span class="hljs-keyword">end</span></span><br><span class="line">        <span class="hljs-keyword">end</span></span><br><span class="line">        <span class="hljs-keyword">break</span></span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">if</span> sprite <span class="hljs-keyword">then</span></span><br><span class="line">        <span class="hljs-keyword">if</span> x <span class="hljs-keyword">and</span> y <span class="hljs-keyword">then</span> sprite:setPosition(x, y) <span class="hljs-keyword">end</span></span><br><span class="line">        <span class="hljs-keyword">if</span> params.size <span class="hljs-keyword">then</span> sprite:setContentSize(params.size) <span class="hljs-keyword">end</span></span><br><span class="line">    <span class="hljs-keyword">else</span></span><br><span class="line">        <span class="hljs-built_in">error</span>(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"display.newSprite() - create sprite failure, source \"%s\""</span>, <span class="hljs-built_in">tostring</span>(source)), <span class="hljs-number">0</span>)</span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">return</span> sprite</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.newSpriteFrame</span><span class="hljs-params">(source, ...)</span></span></span><br><span class="line">    <span class="hljs-keyword">local</span> frame</span><br><span class="line">    <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(source) == <span class="hljs-string">"string"</span> <span class="hljs-keyword">then</span></span><br><span class="line">        <span class="hljs-keyword">if</span> <span class="hljs-built_in">string</span>.<span class="hljs-built_in">byte</span>(source) == <span class="hljs-number">35</span> <span class="hljs-keyword">then</span> <span class="hljs-comment">-- first char is #</span></span><br><span class="line">            source = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">sub</span>(source, <span class="hljs-number">2</span>)</span><br><span class="line">        <span class="hljs-keyword">end</span></span><br><span class="line">        frame = spriteFrameCache:getSpriteFrame(source)</span><br><span class="line">        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> frame <span class="hljs-keyword">then</span></span><br><span class="line">            <span class="hljs-built_in">error</span>(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"display.newSpriteFrame() - invalid frame name \"%s\""</span>, <span class="hljs-built_in">tostring</span>(source)), <span class="hljs-number">0</span>)</span><br><span class="line">        <span class="hljs-keyword">end</span></span><br><span class="line">    <span class="hljs-keyword">elseif</span> tolua.<span class="hljs-built_in">type</span>(source) == <span class="hljs-string">"cc.Texture2D"</span> <span class="hljs-keyword">then</span></span><br><span class="line">        frame = cc.SpriteFrame:createWithTexture(source, ...)</span><br><span class="line">    <span class="hljs-keyword">else</span></span><br><span class="line">        <span class="hljs-built_in">error</span>(<span class="hljs-string">"display.newSpriteFrame() - invalid parameters"</span>, <span class="hljs-number">0</span>)</span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line">    <span class="hljs-keyword">return</span> frame</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.newFrames</span><span class="hljs-params">(pattern, begin, length, isReversed)</span></span></span><br><span class="line">    <span class="hljs-keyword">local</span> frames = {}</span><br><span class="line">    <span class="hljs-keyword">local</span> step = <span class="hljs-number">1</span></span><br><span class="line">    <span class="hljs-keyword">local</span> last = begin + length - <span class="hljs-number">1</span></span><br><span class="line">    <span class="hljs-keyword">if</span> isReversed <span class="hljs-keyword">then</span></span><br><span class="line">        last, begin = begin, last</span><br><span class="line">        step = <span class="hljs-number">-1</span></span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">for</span> index = begin, last, step <span class="hljs-keyword">do</span></span><br><span class="line">        <span class="hljs-keyword">local</span> frameName = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(pattern, index)</span><br><span class="line">        <span class="hljs-keyword">local</span> frame = spriteFrameCache:getSpriteFrame(frameName)</span><br><span class="line">        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> frame <span class="hljs-keyword">then</span></span><br><span class="line">            <span class="hljs-built_in">error</span>(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">"display.newFrames() - invalid frame name %s"</span>, <span class="hljs-built_in">tostring</span>(frameName)), <span class="hljs-number">0</span>)</span><br><span class="line">        <span class="hljs-keyword">end</span></span><br><span class="line">        frames[#frames + <span class="hljs-number">1</span>] = frame</span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line">    <span class="hljs-keyword">return</span> frames</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">newAnimation</span><span class="hljs-params">(frames, time)</span></span></span><br><span class="line">    <span class="hljs-keyword">local</span> count = #frames</span><br><span class="line">    <span class="hljs-built_in">assert</span>(count &gt; <span class="hljs-number">0</span>, <span class="hljs-string">"display.newAnimation() - invalid frames"</span>)</span><br><span class="line">    <span class="hljs-built_in">time</span> = <span class="hljs-built_in">time</span> <span class="hljs-keyword">or</span> <span class="hljs-number">1.0</span> / count</span><br><span class="line">    <span class="hljs-keyword">return</span> cc.Animation:createWithSpriteFrames(frames, <span class="hljs-built_in">time</span>),</span><br><span class="line">           cc.Sprite:createWithSpriteFrame(frames[<span class="hljs-number">1</span>])</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.newAnimation</span><span class="hljs-params">(...)</span></span></span><br><span class="line">    <span class="hljs-keyword">local</span> params = {...}</span><br><span class="line">    <span class="hljs-keyword">local</span> c = #params</span><br><span class="line">    <span class="hljs-keyword">if</span> c == <span class="hljs-number">2</span> <span class="hljs-keyword">then</span></span><br><span class="line">        <span class="hljs-comment">-- frames, time</span></span><br><span class="line">        <span class="hljs-keyword">return</span> newAnimation(params[<span class="hljs-number">1</span>], params[<span class="hljs-number">2</span>])</span><br><span class="line">    <span class="hljs-keyword">elseif</span> c == <span class="hljs-number">4</span> <span class="hljs-keyword">then</span></span><br><span class="line">        <span class="hljs-comment">-- pattern, begin, length, time</span></span><br><span class="line">        <span class="hljs-keyword">local</span> frames = display.newFrames(params[<span class="hljs-number">1</span>], params[<span class="hljs-number">2</span>], params[<span class="hljs-number">3</span>])</span><br><span class="line">        <span class="hljs-keyword">return</span> newAnimation(frames, params[<span class="hljs-number">4</span>])</span><br><span class="line">    <span class="hljs-keyword">elseif</span> c == <span class="hljs-number">5</span> <span class="hljs-keyword">then</span></span><br><span class="line">        <span class="hljs-comment">-- pattern, begin, length, isReversed, time</span></span><br><span class="line">        <span class="hljs-keyword">local</span> frames = display.newFrames(params[<span class="hljs-number">1</span>], params[<span class="hljs-number">2</span>], params[<span class="hljs-number">3</span>], params[<span class="hljs-number">4</span>])</span><br><span class="line">        <span class="hljs-keyword">return</span> newAnimation(frames, params[<span class="hljs-number">5</span>])</span><br><span class="line">    <span class="hljs-keyword">else</span></span><br><span class="line">        <span class="hljs-built_in">error</span>(<span class="hljs-string">"display.newAnimation() - invalid parameters"</span>)</span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.loadImage</span><span class="hljs-params">(imageFilename, callback)</span></span></span><br><span class="line">    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> callback <span class="hljs-keyword">then</span></span><br><span class="line">        <span class="hljs-keyword">return</span> textureCache:addImage(imageFilename)</span><br><span class="line">    <span class="hljs-keyword">else</span></span><br><span class="line">        textureCache:addImageAsync(imageFilename, callback)</span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">if</span> CACHE_RES <span class="hljs-keyword">then</span> </span><br><span class="line">        CACHE_RES[<span class="hljs-string">"imageType"</span>][imageFilename] = <span class="hljs-number">1</span></span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">local</span> fileUtils = cc.FileUtils:getInstance()</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.getImage</span><span class="hljs-params">(imageFilename)</span></span></span><br><span class="line">    <span class="hljs-keyword">local</span> fullpath = fileUtils:fullPathForFilename(imageFilename)</span><br><span class="line">    <span class="hljs-keyword">return</span> textureCache:getTextureForKey(fullpath)  </span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.removeImage</span><span class="hljs-params">(imageFilename)</span></span></span><br><span class="line">    textureCache:removeTextureForKey(imageFilename)</span><br><span class="line">    </span><br><span class="line">    <span class="hljs-keyword">if</span> CACHE_RES <span class="hljs-keyword">then</span> </span><br><span class="line">        CACHE_RES[<span class="hljs-string">"imageType"</span>][imageFilename] = <span class="hljs-literal">nil</span></span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.loadSpriteFrames</span><span class="hljs-params">(dataFilename, imageFilename, callback)</span></span></span><br><span class="line">    <span class="hljs-comment">-- if display.TEXTURES_PIXEL_FORMAT[imageFilename] then</span></span><br><span class="line">    <span class="hljs-comment">--     cc.Texture2D:setDefaultAlphaPixelFormat(display.TEXTURES_PIXEL_FORMAT[imageFilename])</span></span><br><span class="line">    <span class="hljs-comment">-- end</span></span><br><span class="line">    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> callback <span class="hljs-keyword">then</span></span><br><span class="line">        spriteFrameCache:addSpriteFrames(dataFilename, imageFilename)</span><br><span class="line">    <span class="hljs-keyword">else</span></span><br><span class="line">        spriteFrameCache:addSpriteFramesAsync(dataFilename, imageFilename, callback)</span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line">    <span class="hljs-comment">-- if display.TEXTURES_PIXEL_FORMAT[imageFilename] then</span></span><br><span class="line">    <span class="hljs-comment">--     cc.Texture2D:setDefaultAlphaPixelFormat(cc.TEXTURE2_D_PIXEL_FORMAT_BGR_A8888)</span></span><br><span class="line">    <span class="hljs-comment">-- end</span></span><br><span class="line">    <span class="hljs-keyword">if</span> CACHE_RES <span class="hljs-keyword">then</span> </span><br><span class="line">        CACHE_RES[<span class="hljs-string">"plistType"</span>][dataFilename] = imageFilename</span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.removeSpriteFrames</span><span class="hljs-params">(dataFilename, imageFilename)</span></span></span><br><span class="line">    spriteFrameCache:removeSpriteFramesFromFile(dataFilename)</span><br><span class="line">    <span class="hljs-keyword">if</span> imageFilename <span class="hljs-keyword">then</span></span><br><span class="line">        display.removeImage(imageFilename)</span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">if</span> CACHE_RES <span class="hljs-keyword">then</span> </span><br><span class="line">        CACHE_RES[<span class="hljs-string">"plistType"</span>][dataFilename] = <span class="hljs-literal">nil</span></span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.removeSpriteFrame</span><span class="hljs-params">(imageFilename)</span></span></span><br><span class="line">    spriteFrameCache:removeSpriteFrameByName(imageFilename)</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">-- function display.setTexturePixelFormat(imageFilename, format)</span></span><br><span class="line"><span class="hljs-comment">--     display.TEXTURES_PIXEL_FORMAT[imageFilename] = format</span></span><br><span class="line"><span class="hljs-comment">-- end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.setAnimationCache</span><span class="hljs-params">(name, animation)</span></span></span><br><span class="line">    animationCache:addAnimation(animation, name)</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.getAnimationCache</span><span class="hljs-params">(name)</span></span></span><br><span class="line">    <span class="hljs-keyword">return</span> animationCache:getAnimation(name)</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.removeAnimationCache</span><span class="hljs-params">(name)</span></span></span><br><span class="line">    animationCache:removeAnimation(name)</span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display.removeUnusedSpriteFrames</span><span class="hljs-params">()</span></span></span><br><span class="line">    <span class="hljs-comment">-- spriteFrameCache:removeUnusedSpriteFrames()</span></span><br><span class="line">    <span class="hljs-comment">-- textureCache:removeUnusedTextures()</span></span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">if</span> CACHE_RES <span class="hljs-keyword">then</span> </span><br><span class="line">        CACHE_RES[<span class="hljs-string">"plistType"</span>] = {}</span><br><span class="line">        CACHE_RES[<span class="hljs-string">"imageType"</span>] = {}</span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line"><span class="hljs-keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">return</span> display</span><br></pre></td></tr></tbody></table></figure></body></html>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop is-hidden-mobile article-nav-prev">
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/2021/09/17/hello-world/">Hello World</a>
            
        </span>
    </div>
    
</article>


<div class="sharebox">
    
<div class="notification is-danger">
    You need to set <code>install_url</code> to use ShareThis. Please set it in <code>_config.yml</code>.
</div>

</div>



<div class="comments">
    <h3 class="title is-4">Comments</h3>
    
<div id="disqus_thread">
    
    <div class="notification is-danger">
        You forgot to set the <code>shortname</code> for Disqus. Please set it in <code>_config.yml</code>.
    </div>
    
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</div>

    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2021 John Doe&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            <div class="column is-narrow">
                <div class="columns is-mobile is-multiline is-centered">
                
                    
                <a class="column is-narrow has-text-black" title="GitHub" target="_blank" rel="noopener" href="https://github.com/ppoffice/hexo-theme-minos">
                    
                    GitHub
                    
                </a>
                
                </div>
            </div>
            
            
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("en-AU");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    



<script src="/js/script.js"></script>


    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>

<script src="/js/insight.js"></script>

    
</body>
</html>